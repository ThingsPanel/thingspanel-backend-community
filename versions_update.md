# TODO

## v0.4.5

1. 数据管理列表增加设备名称、数据标签模糊匹配，增加属性别名（设备字段的映射，在设备插件物模型中可定义），优化了字段排列和UI样式
2. 设备管理列表的编辑参数界面优化了连接信息，支持点击复制，创建项目默认了一个分组，给用户对接提供了便利
3. 优化设备管理列表的排序，增加了在线离线状态（实时显示）
4. 修改设备管理增删改查操作中出现的部分bug，保证了数据的完整性和一致性
5. 优化了绑定插件界面，增加了指引，提供了更好的人机交互
6. 设备插件物模型中增加属性单位的录入，单位同时可显示在图表单元中。
7. 增加了设备监控菜单，对单个设备进行可视化。
8. 增加了设备配置按钮，增加了设备位置信息的录入功能
9. 自动化定时控制流程增加了异常处理
10. 设备脚本支持处理透传协议的消息，支持mqtt协议接入发送字符串，二进制等类型的消息
11. 上下行脚本函数参数msg的类型由string变为[]byte（上个版本使用脚本的用户需要注意）
12. 优化了协议插件模块，增加了自定义TCP协议、官方TCP协议插件
13. Modbus协议插件修复了部分BUG，优化了性能。
14. 支持协议插件自动注册和手动注册
15. 规范和优化了协议插件开发的流程和于平台通信的接口
16. 更新了设备脚本的编写提示，增加了脚本的分类（根据协议类型和设备类型），优化了脚本相关的UI
17. 后端go语言版本升级到了1.18
18. 增加了协议插件部分的文档，更新和优化了其他部分的文档，有助于用户更好的参考
19. 新增了大屏可视化菜单以及其中的功能
20. 增加了设备地图相关接口，为下个版本的设备地图功能提供
21. 增加mqtt客户端启动重连、掉线重连，配置文件增加QoS配置
22. 增加获取系统时间接口
23. 系统操作日志、数据管理查询慢优化，
24. 增加通过手动控制触发自动化中的场景接口（http通知后端）
25. docker镜像目录映射完善(规则引擎升级-需要查找差分文件，gmqtt升级-用户密码文件需要查找差分文件)
26. 增加和更新系统自带设备插件
27. 设备列表显示设备插件中图表单元标签
28. 0.4.5版本发布
29. 检查更新readme文件
30. 开发环境自动化部署

## v0.4.6

- [x] 增加更换登录页背景功能
- [x] modbus视频录制（带设备监控展示）
- [x] 增加GB28181视频功能（对接WVP云台）
- [x] 开发环境自动化部署（webhook方案，clash代理）
- [x] 修复控制台日志级别配置不生效问题
- [x] 修复mqtt网关设备无法接收上报属性消息的问题
- [x] 优化操作日志查询和首页消息总数查询；10w以上总数查询增加了短时间缓存。
- [x] 优化登录失败异常返回
- [x] 修复存在告警日志时，设备无法删除问题
- [x] 修复gitee图片无法显示问题,将图片放入readme_file目录
- [x] 修复GB28181视频协议设备重复添加问题
- [x] 增加设备地图模块

## v0.4.7

- [x] 场景联动
- [x] 场景管理
- [x] 告警信息
- [x] 增加数据转发订阅主题

## v0.4.8

- [x] sql注入、日志注入漏洞修复
- [x] mqtt在线不显示bug修复
- [x] gmqtt内存泄漏问题修复
- [ ] 用户名问题，进行多租户时候再改，数据结构需要修改
- [ ] *Mthing对接平台文档（https://www.modbus.cn/10836.html）
- [ ] 后端配置文件合并和优化
- [ ] tcp协议插件在线离线通知
- [ ] 支持可不使用redis
- [ ] 取消设备bool类型的值（json不支持）
- [ ] 优化路由 参考beego注册函数式风格路由注册
- [ ] 优化外部环境变量，与配置文件关联
- [ ] 邮箱配置到数据库
- [ ] modbus协议插件的完善
- [ ] 物模型增加服务和事件
- [ ] 协议认证方式优化方案执行
- [ ] 数据导出，如果数量太大会失败，需要异步方式处理，每次写入10000条；导出后需要到指定列表下载，而不是直接下载
- [ ] gmqtt内存泄露问题，句柄不断增加
- [ ] gmqtt密码文件问题，docker部署重启gmqtt需要重新添加认证（位置问题）

## 其他

beego：https://beego.gocn.vip/beego/zh/developing/
